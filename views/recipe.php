<!-- Vista Ricetta -->
<?php

    $user_id = $_SESSION['id'];

    $recipe_id = $_GET['id'];
        
    $query = "SELECT * FROM recipes WHERE id = ? LIMIT 1";

    $stmt = $link->prepare($query);

    $stmt->bind_param('i', $recipe_id);

    $stmt->execute();

    if (!$stmt->error) {

        $result = $stmt->get_result();

        $stmt->close();

        $row = $result->fetch_assoc();

        if (empty($row)) {

            echo '<div class="alerterror">';
            echo 'Ricetta non trovata'; 
            echo '</div>';
            echo '<a id="return">Torna Indietro</a>';

        } else {

            $vote_result = $link->query("SELECT SUM(vote) AS vote FROM votes WHERE recipe_id = $recipe_id LIMIT 1");

            $vote = $vote_result->fetch_assoc();

            $voters_result = $link->query("SELECT COUNT(id) as voters FROM votes WHERE recipe_id = $recipe_id LIMIT 1");

            $voters = $voters_result->fetch_assoc();
    
?>

<section class="recipe">
    <article class="recipe_top">
        <img class="recipe_image" src="<?php echo $row['image']; ?>" alt="<?php echo $row['title']; ?>">
        <button class="recipe_favourite" data-recipeid="<?php echo $row['id']; ?>">
                <?php 
                    if (countRowsDouble('follows', 'user_id', 'recipe_id', 'ii', $user_id, $recipe_id)) {
        
                        echo '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="32" viewBox="0 0 35 32" fill="none">
                                <path d="M17.4387 32L14.9101 29.6981C5.92916 21.5542 0 16.1831 0 9.59128C0 4.22016 4.22016 0 9.59128 0C12.6256 0 15.5379 1.41253 17.4387 3.64469C19.3395 1.41253 22.2518 0 25.2861 0C30.6572 0 34.8774 4.22016 34.8774 9.59128C34.8774 16.1831 28.9482 21.5542 19.9673 29.7155L17.4387 32Z" fill="#FF0000"/>
                                </svg>';
        
                    } else {

                        echo '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="32" viewBox="0 0 35 32" fill="none">
                                <path d="M17.4387 32L14.9101 29.6981C5.92916 21.5542 0 16.1831 0 9.59128C0 4.22016 4.22016 0 9.59128 0C12.6256 0 15.5379 1.41253 17.4387 3.64469C19.3395 1.41253 22.2518 0 25.2861 0C30.6572 0 34.8774 4.22016 34.8774 9.59128C34.8774 16.1831 28.9482 21.5542 19.9673 29.7155L17.4387 32Z" fill="#CCCCCC"/>
                                </svg>';
                            
                    }
                ?>
        </button>        
        <div class="recipe_info">
            <div class="recipe_info_top">
                <h1 class="recipe_title"><?php echo $row['title']; ?></h1>
            </div>
            <div class="recipe_info_body">
                <div class="recipe_vote_body">
                    <div class="recipe_vote">
                        <div class="recipe_svg">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                                <path d="M31.6704 14.2758C32.3076 13.6451 32.5325 12.7194 32.2577 11.859C31.9822 10.9985 31.2646 10.3842 30.383 10.2539L22.5444 9.09716C22.2106 9.04778 21.9221 8.83513 21.773 8.52768L18.2686 1.31408C17.8751 0.503642 17.0765 0 16.1865 0C15.2971 0 14.4984 0.503642 14.105 1.31408L10.5999 8.52768C10.4508 8.83513 10.1617 9.04778 9.82786 9.09716L1.98932 10.2545C1.10836 10.3842 0.390755 10.9985 0.115253 11.859C-0.159602 12.7194 0.0653379 13.6451 0.70256 14.2758L6.37403 19.8902C6.61582 20.1299 6.72667 20.4749 6.66962 20.8119L5.33101 28.7405C5.18061 29.6313 5.53391 30.5141 6.2541 31.0461C6.97365 31.5787 7.91036 31.6478 8.69927 31.2258L15.7094 27.4824C16.0082 27.3231 16.3647 27.3231 16.6636 27.4824L23.6743 31.2258C24.0166 31.4088 24.3874 31.499 24.7562 31.499C25.2353 31.499 25.7124 31.3469 26.1195 31.0461C26.8397 30.5141 27.193 29.6313 27.0426 28.7405L25.7033 20.8126C25.6463 20.4749 25.7571 20.1305 25.9989 19.8909L31.6704 14.2758ZM24.4263 21.0351L25.7649 28.963C25.8323 29.362 25.68 29.7432 25.3571 29.9815C25.0337 30.2192 24.6311 30.2481 24.2778 30.0612L17.2671 26.3171C16.9293 26.1374 16.5573 26.0465 16.1865 26.0465C15.8157 26.0465 15.4442 26.1374 15.1058 26.3178L8.09641 30.0612C7.74182 30.2481 7.33926 30.2192 7.01643 29.9815C6.69361 29.7432 6.54192 29.3627 6.60869 28.963L7.94731 21.0351C8.07631 20.2701 7.82674 19.4893 7.27962 18.9481L1.60751 13.333C1.32163 13.0499 1.22439 12.651 1.34821 12.2658C1.47137 11.88 1.78059 11.6154 2.17536 11.5568L10.0133 10.4C10.7698 10.2888 11.4238 9.80687 11.7616 9.11033L15.2666 1.89672C15.4429 1.53331 15.7871 1.31671 16.1858 1.31671C16.5851 1.31671 16.9287 1.53331 17.1057 1.89672L20.6107 9.11033C20.9484 9.80687 21.6019 10.2888 22.3584 10.4L30.1969 11.5568C30.5917 11.6154 30.9009 11.88 31.0241 12.2658C31.1472 12.651 31.0506 13.0499 30.7648 13.333L25.0933 18.9475C24.5462 19.4893 24.2966 20.2695 24.4263 21.0351Z" fill="#666666"/>
                            </svg>
                        </div>
                        <span class="recipe_span"><span>Voto:</span><strong><?php if ($voters['voters'] == 0) {echo 'Ancora nessun voto';} else {echo number_format($vote['vote']/$voters['voters'], 1);}?></strong></span>
                    </div>
                    <div class="recipe_vote_input">
                        <div class="recipe_vote_input_content">
                            <?php
                                $query = "SELECT vote FROM votes WHERE user_id = ? AND recipe_id = ? LIMIT 1";

                                $stmt = $link->prepare($query);

                                $stmt->bind_param('ii', $user_id, $recipe_id);

                                $stmt->execute();

                                if (!$stmt->error){

                                    $result = $stmt->get_result();

                                    $stmt->close();

                                    $check = $result->fetch_assoc();

                                }
                            ?>
                            <?php
                                if (empty($_SESSION['id'])) {
                                    echo "<a href='?page=logreg'>Registrati per votare</a>";
                                } else {
                            ?>
                            <input data-recipeid="<?php echo $row['id']; ?>" name="rating" type="radio" id="rate1" value="1" <?php if ($check['vote'] == 1) { echo 'checked'; }?> />
                            <label for="rate1">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                                    <path d="M32.7843 11.9035C32.5691 11.2379 31.9787 10.7652 31.2803 10.7022L21.7931 9.84077L18.0417 1.06006C17.765 0.416553 17.1351 0 16.4351 0C15.7352 0 15.1052 0.416553 14.8286 1.06157L11.0771 9.84077L1.58846 10.7022C0.891283 10.7667 0.302442 11.2379 0.0860148 11.9035C-0.130412 12.5691 0.0694631 13.2991 0.596862 13.7593L7.76804 20.0484L5.65342 29.3633C5.49869 30.0482 5.76452 30.7562 6.3328 31.167C6.63825 31.3876 6.99562 31.5 7.356 31.5C7.66672 31.5 7.97493 31.4162 8.25155 31.2507L16.4351 26.3597L24.6157 31.2507C25.2143 31.6108 25.9689 31.578 26.536 31.167C27.1045 30.7549 27.3701 30.0467 27.2153 29.3633L25.1007 20.0484L32.2719 13.7605C32.7993 13.2991 33.0007 12.5703 32.7843 11.9035V11.9035Z" fill="#FFC107"/>
                                </svg>
                            </label>

                            <input data-recipeid="<?php echo $row['id']; ?>" name="rating" type="radio" id="rate2" value="2" <?php if ($check['vote'] == 2) { echo 'checked'; }?> />
                            <label for="rate2">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                                    <path d="M32.7843 11.9035C32.5691 11.2379 31.9787 10.7652 31.2803 10.7022L21.7931 9.84077L18.0417 1.06006C17.765 0.416553 17.1351 0 16.4351 0C15.7352 0 15.1052 0.416553 14.8286 1.06157L11.0771 9.84077L1.58846 10.7022C0.891283 10.7667 0.302442 11.2379 0.0860148 11.9035C-0.130412 12.5691 0.0694631 13.2991 0.596862 13.7593L7.76804 20.0484L5.65342 29.3633C5.49869 30.0482 5.76452 30.7562 6.3328 31.167C6.63825 31.3876 6.99562 31.5 7.356 31.5C7.66672 31.5 7.97493 31.4162 8.25155 31.2507L16.4351 26.3597L24.6157 31.2507C25.2143 31.6108 25.9689 31.578 26.536 31.167C27.1045 30.7549 27.3701 30.0467 27.2153 29.3633L25.1007 20.0484L32.2719 13.7605C32.7993 13.2991 33.0007 12.5703 32.7843 11.9035V11.9035Z" fill="#FFC107"/>
                                </svg>
                            </label>

                            <input data-recipeid="<?php echo $row['id']; ?>" name="rating" type="radio" id="rate3" value="3" <?php if ($check['vote'] == 3) { echo 'checked'; }?> />
                            <label for="rate3">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                                    <path d="M32.7843 11.9035C32.5691 11.2379 31.9787 10.7652 31.2803 10.7022L21.7931 9.84077L18.0417 1.06006C17.765 0.416553 17.1351 0 16.4351 0C15.7352 0 15.1052 0.416553 14.8286 1.06157L11.0771 9.84077L1.58846 10.7022C0.891283 10.7667 0.302442 11.2379 0.0860148 11.9035C-0.130412 12.5691 0.0694631 13.2991 0.596862 13.7593L7.76804 20.0484L5.65342 29.3633C5.49869 30.0482 5.76452 30.7562 6.3328 31.167C6.63825 31.3876 6.99562 31.5 7.356 31.5C7.66672 31.5 7.97493 31.4162 8.25155 31.2507L16.4351 26.3597L24.6157 31.2507C25.2143 31.6108 25.9689 31.578 26.536 31.167C27.1045 30.7549 27.3701 30.0467 27.2153 29.3633L25.1007 20.0484L32.2719 13.7605C32.7993 13.2991 33.0007 12.5703 32.7843 11.9035V11.9035Z" fill="#FFC107"/>
                                </svg>
                            </label>

                            <input data-recipeid="<?php echo $row['id']; ?>" name="rating" type="radio" id="rate4" value="4" <?php if ($check['vote'] == 4) { echo 'checked'; }?> />
                            <label for="rate4">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                                    <path d="M32.7843 11.9035C32.5691 11.2379 31.9787 10.7652 31.2803 10.7022L21.7931 9.84077L18.0417 1.06006C17.765 0.416553 17.1351 0 16.4351 0C15.7352 0 15.1052 0.416553 14.8286 1.06157L11.0771 9.84077L1.58846 10.7022C0.891283 10.7667 0.302442 11.2379 0.0860148 11.9035C-0.130412 12.5691 0.0694631 13.2991 0.596862 13.7593L7.76804 20.0484L5.65342 29.3633C5.49869 30.0482 5.76452 30.7562 6.3328 31.167C6.63825 31.3876 6.99562 31.5 7.356 31.5C7.66672 31.5 7.97493 31.4162 8.25155 31.2507L16.4351 26.3597L24.6157 31.2507C25.2143 31.6108 25.9689 31.578 26.536 31.167C27.1045 30.7549 27.3701 30.0467 27.2153 29.3633L25.1007 20.0484L32.2719 13.7605C32.7993 13.2991 33.0007 12.5703 32.7843 11.9035V11.9035Z" fill="#FFC107"/>
                                </svg>
                            </label>

                            <input data-recipeid="<?php echo $row['id']; ?>" name="rating" type="radio" id="rate5" value="5" <?php if ($check['vote'] == 5 || $check['vote'] == 0) { echo 'checked'; }?> />
                            <label for="rate5">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                                    <path d="M32.7843 11.9035C32.5691 11.2379 31.9787 10.7652 31.2803 10.7022L21.7931 9.84077L18.0417 1.06006C17.765 0.416553 17.1351 0 16.4351 0C15.7352 0 15.1052 0.416553 14.8286 1.06157L11.0771 9.84077L1.58846 10.7022C0.891283 10.7667 0.302442 11.2379 0.0860148 11.9035C-0.130412 12.5691 0.0694631 13.2991 0.596862 13.7593L7.76804 20.0484L5.65342 29.3633C5.49869 30.0482 5.76452 30.7562 6.3328 31.167C6.63825 31.3876 6.99562 31.5 7.356 31.5C7.66672 31.5 7.97493 31.4162 8.25155 31.2507L16.4351 26.3597L24.6157 31.2507C25.2143 31.6108 25.9689 31.578 26.536 31.167C27.1045 30.7549 27.3701 30.0467 27.2153 29.3633L25.1007 20.0484L32.2719 13.7605C32.7993 13.2991 33.0007 12.5703 32.7843 11.9035V11.9035Z" fill="#FFC107"/>
                                </svg>
                            </label>
                            <?php } ?>
                        </div>
                    </div>
                    <div class="recipe_vote_active">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="33" height="32" viewBox="0 0 33 32" fill="none">
                            <path d="M32.7843 11.9035C32.5691 11.2379 31.9787 10.7652 31.2803 10.7022L21.7931 9.84077L18.0417 1.06006C17.765 0.416553 17.1351 0 16.4351 0C15.7352 0 15.1052 0.416553 14.8286 1.06157L11.0771 9.84077L1.58846 10.7022C0.891283 10.7667 0.302442 11.2379 0.0860148 11.9035C-0.130412 12.5691 0.0694631 13.2991 0.596862 13.7593L7.76804 20.0484L5.65342 29.3633C5.49869 30.0482 5.76452 30.7562 6.3328 31.167C6.63825 31.3876 6.99562 31.5 7.356 31.5C7.66672 31.5 7.97493 31.4162 8.25155 31.2507L16.4351 26.3597L24.6157 31.2507C25.2143 31.6108 25.9689 31.578 26.536 31.167C27.1045 30.7549 27.3701 30.0467 27.2153 29.3633L25.1007 20.0484L32.2719 13.7605C32.7993 13.2991 33.0007 12.5703 32.7843 11.9035V11.9035Z" fill="#FFC107"/>
                        </svg>
                    </div>
                </div>
                <div class="recipe_difficult">
                    <div class="recipe_svg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="31" height="32" viewBox="0 0 31 32" fill="none">
                        <path d="M15.4275 0C13.7337 0 12.3562 1.17731 12.3562 2.62502V5.25004C12.3562 5.61223 12.7002 5.90625 13.124 5.90625C13.5479 5.90625 13.8919 5.61223 13.8919 5.24998V2.62502C13.8919 1.90052 14.5798 1.31254 15.4275 1.31254C16.2751 1.31254 16.9631 1.90052 16.9631 2.62502V5.25004C16.9631 5.61223 17.3071 5.90625 17.7309 5.90625C18.1547 5.90625 18.4988 5.61223 18.4988 5.24998V2.62502C18.4988 1.17731 17.1213 0 15.4275 0Z" fill="#666666"/>
                        <path d="M18.7506 26.5744C18.534 26.262 18.0656 26.1596 17.6987 26.3394C17.3316 26.5232 17.2088 26.9261 17.4238 27.2385C17.6234 27.5285 17.7324 27.8763 17.7324 28.2189C17.7324 29.3044 16.699 30.1876 15.429 30.1876C14.159 30.1876 13.1256 29.3044 13.1256 28.2189C13.1256 27.8763 13.2346 27.5285 13.4342 27.2385C13.6477 26.9247 13.5249 26.5231 13.1593 26.3394C12.7893 26.1596 12.3224 26.262 12.1074 26.5744C11.768 27.0705 11.5884 27.6388 11.5884 28.219C11.5885 30.0289 13.3098 31.5002 15.4275 31.5002C17.5451 31.5002 19.2665 30.0289 19.2696 28.219C19.2696 27.6388 19.09 27.0705 18.7506 26.5744Z" fill="#666666"/>
                        <path d="M30.6747 26.5689L28.0365 22.8126C26.8203 21.0788 26.1768 19.0943 26.1768 17.0717V13.7812C26.1768 8.71631 21.3534 4.59375 15.4275 4.59375C9.50153 4.59375 4.67813 8.71631 4.67813 13.7812V17.0717C4.67813 19.0943 4.03468 21.0788 2.81846 22.8126L0.180232 26.5689C0.0374191 26.771 0.034324 27.0244 0.169507 27.2291C0.306202 27.4352 0.562603 27.5625 0.839016 27.5625H30.0159C30.2923 27.5625 30.5488 27.4353 30.6854 27.2291C30.8206 27.0243 30.8175 26.771 30.6747 26.5689ZM2.19502 26.25L4.13452 23.4872C5.49506 21.5499 6.21373 19.3318 6.21373 17.0717V13.7812C6.21373 9.43817 10.3461 5.90623 15.4275 5.90623C20.5089 5.90623 24.6412 9.43817 24.6412 13.7812V17.0717C24.6412 19.3318 25.3599 21.5499 26.7189 23.4872L28.6599 26.25H2.19502Z" fill="#666666"/>
                    </svg>
                    </div>
                    <span class="recipe_span"><span>Difficolt√†:</span><strong><?php echo $row['difficult'];?></strong></span>
                </div>
                <div class="recipe_time">
                    <div class="recipe_svg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M15.7435 0C20.0893 0 24.0241 1.76716 26.8804 4.61201C29.7252 7.46906 31.4924 11.4038 31.4924 15.7496C31.4924 20.0954 29.7252 24.0302 26.8804 26.8872C24.0233 29.7321 20.0893 31.4992 15.7435 31.4992C11.3977 31.4992 7.46372 29.7321 4.61887 26.8872C1.76182 24.0302 0.00610352 20.0962 0.00610352 15.7496C0.00610352 11.4038 1.76106 7.46906 4.61811 4.61201C7.46372 1.76716 11.3977 0 15.7435 0ZM23.7701 14.8901C24.2422 14.8901 24.6175 15.2775 24.6175 15.7496C24.6175 16.2217 24.2422 16.6092 23.7701 16.6092H15.7679H15.7435C15.4285 16.6092 15.1501 16.4277 15.0052 16.1737L14.993 16.1615L14.9808 16.1371V16.1249L14.9686 16.1005L14.9564 16.0761V16.0638L14.9442 16.0394L14.932 16.0272V16.0028L14.9198 15.9784V15.9662L14.9076 15.9418V15.9174V15.9052V15.893L14.8954 15.8808V15.8564V15.832V15.8106V15.7984V15.774V15.7496V5.49597C14.8954 5.02386 15.2706 4.64862 15.7428 4.64862C16.2149 4.64862 16.6023 5.02386 16.6023 5.49597V14.8901H23.7701ZM25.67 5.82316C23.1279 3.28111 19.6172 1.71911 15.7435 1.71911C11.8698 1.71911 8.35912 3.28034 5.81706 5.82316C3.28721 8.36522 1.71301 11.8759 1.71301 15.7496C1.71301 19.6233 3.28645 23.134 5.81706 25.6768C8.35912 28.2189 11.8698 29.7809 15.7435 29.7809C19.6172 29.7809 23.1279 28.2189 25.67 25.6768C28.212 23.1348 29.7862 19.6241 29.7862 15.7496C29.7862 11.8759 28.2128 8.36522 25.67 5.82316Z" fill="#666666"/>
                    </svg>
                    </div>
                    <span class="recipe_span"><span>Tempo:</span><strong><?php echo $row['time'];?>&nbsp minuti</strong></span>
                </div>
                <div class="recipe_person">
                    <div class="recipe_svg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="32" viewBox="0 0 28 32" fill="none">
                        <path d="M13.6358 16.9731C13.6684 16.9731 13.701 16.9731 13.7402 16.9731C13.7532 16.9731 13.7662 16.9731 13.7793 16.9731C13.7989 16.9731 13.825 16.9731 13.8445 16.9731C15.7558 16.9405 17.3018 16.2686 18.4433 14.9835C20.9547 12.1525 20.5372 7.29934 20.4915 6.8362C20.3285 3.35939 18.6847 1.696 17.3279 0.919756C16.3168 0.339201 15.1361 0.0260924 13.8184 0H13.7728C13.7662 0 13.7532 0 13.7467 0H13.7075C12.9835 0 11.5614 0.117416 10.1981 0.893663C8.82827 1.66991 7.15835 3.3333 6.99528 6.8362C6.94962 7.29934 6.53214 12.1525 9.04353 14.9835C10.1785 16.2686 11.7245 16.9405 13.6358 16.9731ZM8.73694 6.99928C8.73694 6.97971 8.74347 6.96014 8.74347 6.94709C8.95873 2.27004 12.279 1.76776 13.701 1.76776H13.7271C13.7402 1.76776 13.7597 1.76776 13.7793 1.76776C15.5405 1.8069 18.5346 2.52444 18.7368 6.94709C18.7368 6.96666 18.7368 6.98623 18.7434 6.99928C18.7499 7.04494 19.2065 11.4806 17.1322 13.8159C16.3102 14.7422 15.2144 15.1988 13.7728 15.2118C13.7597 15.2118 13.7532 15.2118 13.7402 15.2118C13.7271 15.2118 13.7206 15.2118 13.7075 15.2118C12.2725 15.1988 11.1701 14.7422 10.3547 13.8159C8.28685 11.4937 8.73042 7.03841 8.73694 6.99928Z" fill="#666666"/>
                        <path d="M27.1451 25.0225C27.1451 25.016 27.1451 25.0095 27.1451 25.0029C27.1451 24.9507 27.1386 24.8986 27.1386 24.8399C27.0995 23.5483 27.0147 20.5281 24.1836 19.5627C24.1641 19.5561 24.138 19.5496 24.1184 19.5431C21.1765 18.7929 18.7303 17.0969 18.7043 17.0774C18.3063 16.7969 17.7584 16.8947 17.4779 17.2926C17.1974 17.6905 17.2953 18.2385 17.6932 18.519C17.8041 18.5972 20.4003 20.4041 23.6488 21.2391C25.1686 21.7805 25.3382 23.4048 25.3839 24.892C25.3839 24.9507 25.3839 25.0029 25.3904 25.0551C25.3969 25.6422 25.3578 26.5489 25.2534 27.0708C24.1967 27.6709 20.0545 29.7452 13.7532 29.7452C7.47802 29.7452 3.30976 27.6644 2.2465 27.0642C2.14213 26.5424 2.09647 25.6357 2.10951 25.0486C2.10951 24.9964 2.11604 24.9442 2.11604 24.8855C2.1617 23.3982 2.3313 21.774 3.85118 21.2326C7.09968 20.3976 9.69587 18.5842 9.80676 18.5124C10.2047 18.232 10.3025 17.684 10.022 17.2861C9.74153 16.8882 9.19359 16.7904 8.79568 17.0708C8.76959 17.0904 6.33648 18.7864 3.38152 19.5366C3.35542 19.5431 3.33585 19.5496 3.31629 19.5561C0.485265 20.5281 0.400464 23.5483 0.361326 24.8333C0.361326 24.892 0.361326 24.9442 0.354803 24.9964C0.354803 25.0029 0.354803 25.0095 0.354803 25.016C0.34828 25.3552 0.341757 27.0968 0.68748 27.9709C0.752711 28.1405 0.870127 28.284 1.02668 28.3819C1.22237 28.5124 5.91248 31.4999 13.7598 31.4999C21.607 31.4999 26.2971 28.5058 26.4928 28.3819C26.6429 28.284 26.7668 28.1405 26.832 27.9709C27.1582 27.1034 27.1517 25.3617 27.1451 25.0225Z" fill="#666666"/>
                    </svg>
                    </div>
                    <span class="recipe_span"><span>Persone:</span><strong><?php echo $row['person'];?></strong></span>
                </div>
                <div class="recipe_label">
                    <div class="recipe_svg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <path d="M23.3656 5.23438C22.591 5.23438 21.8628 5.53622 21.3151 6.08393C20.7674 6.63139 20.4658 7.35958 20.4658 8.13415C20.4658 8.90872 20.7674 9.63691 21.3151 10.1846C21.8628 10.7323 22.591 11.0339 23.3656 11.0339C24.1399 11.0339 24.8681 10.7323 25.4158 10.1846C25.9635 9.63691 26.2651 8.90872 26.2651 8.13415C26.2651 7.35958 25.9635 6.63139 25.4161 6.08393C24.8684 5.53622 24.1402 5.23438 23.3656 5.23438ZM24.1108 8.8794C23.9119 9.07863 23.647 9.18822 23.3656 9.18822C23.0839 9.18822 22.8193 9.07863 22.6203 8.8794C22.4211 8.68041 22.3115 8.41557 22.3115 8.13415C22.3115 7.85273 22.4211 7.58789 22.6203 7.3889C22.8193 7.18967 23.0842 7.08008 23.3656 7.08008C23.647 7.08008 23.9116 7.18967 24.1108 7.3889C24.3101 7.58789 24.4197 7.85273 24.4197 8.13415C24.4197 8.41557 24.3098 8.68041 24.1108 8.8794Z" fill="#666666"/>
                        <path d="M28.1089 0H16.1544C15.9098 0 15.675 0.0973317 15.5019 0.270366L0.991342 14.7805C-0.330447 16.1028 -0.330447 18.2539 0.991342 19.5757L11.924 30.5081C12.5623 31.1464 13.4138 31.498 14.3212 31.4982H14.3215C15.2292 31.4982 16.0806 31.1464 16.7192 30.5078L31.2293 15.9975C31.4023 15.8245 31.4997 15.5897 31.4997 15.345L31.4999 3.39051C31.4997 1.52102 29.9784 0 28.1089 0ZM29.654 14.9629L15.414 29.2029C15.1241 29.493 14.736 29.6525 14.3215 29.6525C13.9067 29.6525 13.5188 29.493 13.2289 29.2031L2.29631 18.2707C1.69405 17.6685 1.69405 16.6879 2.29631 16.0854L16.5365 1.8457H28.1089C28.9609 1.8457 29.6542 2.5388 29.6542 3.39075L29.654 14.9629Z" fill="#666666"/>
                    </svg>
                    </div>
                    <span class="recipe_span"><span>Etichette:</span><?php if (empty($row['filter'])){echo '<strong>Nessuna</strong></span>';} else {?></span><span class="recipe_icon"><?php
                        if (strstr($row['filter'], 'vegetariano')) {
                            echo '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <path d="M28.3886 7.57438C28.1664 7.47884 28.0156 7.27015 27.9951 7.02984C27.8268 5.05088 26.2169 3.45539 24.1939 3.35621C23.8761 3.34071 23.5994 3.12415 23.4887 2.80453C22.431 -0.250722 18.2669 -0.510104 16.7627 2.2411L16.7266 2.30724L16.7981 2.33123C18.2435 2.81554 19.4069 4.15836 19.533 5.87683C22.19 6.67706 24.352 8.22942 25.9322 10.2856L26.0102 10.3871L26.0432 10.2634C26.2701 9.41381 26.903 7.9642 28.5937 7.80134L28.8093 7.77778C28.5513 7.65006 28.4792 7.61333 28.3886 7.57438Z" fill="#3BBC56"/>
                            <path d="M22.5488 1.32948C20.8969 -0.235734 17.9715 0.0307858 16.763 2.24126L16.7268 2.3074L16.7983 2.33139C17.2426 2.48028 17.6601 2.71056 18.0292 3.00766C18.9696 1.29571 20.9417 0.753686 22.5488 1.32948Z" fill="#30AA44"/>
                            <path d="M3.93994 19.0985L3.94406 19.0991L3.96135 18.9741L3.93994 19.0985Z" fill="#30AA44"/>
                            <path d="M3.63623 19.0642L3.63851 19.0642C3.6414 18.9886 3.64097 19.0156 3.64072 18.938L3.63623 19.0642Z" fill="#30AA44"/>
                            <path d="M15.7698 2.00656C14.5881 1.94258 13.4347 2.38635 12.6048 3.2254C12.3361 3.49691 11.9484 3.58236 11.617 3.44326C9.52599 2.56477 7.1323 3.40112 6.00863 5.31253C5.87027 5.54785 5.61335 5.68677 5.34086 5.67601C1.10134 5.50313 -1.50215 10.2936 0.945008 13.7527C1.24881 14.182 1.30738 14.7387 1.09789 15.2055C0.475277 16.5936 0.772865 18.3262 2.11777 19.4346C2.58172 19.1871 2.93831 19.0928 3.3814 19.0619C2.76364 11.5096 8.69715 5.35522 15.9349 5.35522C17.2812 5.35522 18.4747 5.558 19.6625 5.91576C19.4934 3.6218 17.7261 2.11325 15.7698 2.00656Z" fill="#30AA44"/>
                            <path d="M2.36019 15.1328C2.56968 14.658 2.51111 14.0917 2.2073 13.655C0.127443 10.6646 1.69629 6.6966 4.81676 5.68066C0.892179 5.90307 -1.39963 10.4386 0.944967 13.7526C1.24877 14.1819 1.30734 14.7386 1.09785 15.2054C0.475235 16.5936 0.772824 18.3261 2.11773 19.4345C2.45414 19.2551 2.73413 19.1564 3.03153 19.1038C1.98779 17.9818 1.79559 16.4132 2.36019 15.1328Z" fill="#239B31"/>
                            <path d="M26.0322 10.2084C24.8682 8.69388 23.354 7.4404 21.6536 6.58344C19.8701 5.68471 17.9461 5.229 15.9349 5.229C8.65658 5.229 2.62913 11.4135 3.2555 19.0707L3.3177 19.0664C5.03635 18.9461 6.24148 20.6178 6.25341 20.6347L6.27058 20.659L6.30011 20.6612C7.74265 20.7714 8.88477 21.5918 9.69479 23.0998C10.3021 24.2303 10.4831 25.344 10.4849 25.355L10.4927 25.4049L10.5432 25.4082C13.0257 25.5675 14.8597 28.0734 15.8999 30.3468C16.8201 27.1149 18.916 24.3941 22.2191 23.8436L22.2795 23.8335L22.2713 23.7728C22.2643 23.7216 21.6077 18.6315 24.5097 16.7986L24.5525 16.7716L24.5353 16.724C24.5206 16.683 23.0995 12.6064 25.9175 10.7785L25.9423 10.7624L25.9458 10.733C25.946 10.731 25.9688 10.5414 26.0431 10.2632L26.0511 10.2332L26.0322 10.2084Z" fill="#83CC8E"/>
                            <path d="M17.0804 5.27939C16.702 5.24605 16.3201 5.229 15.9349 5.229C8.65658 5.229 2.62913 11.4135 3.2555 19.0707L3.3177 19.0663C3.78595 19.0336 4.21563 19.1343 4.59388 19.2979C4.16543 11.7523 9.95066 5.66391 17.0804 5.27939Z" fill="#78C181"/>
                            <path d="M14.7105 28.0158C13.6044 26.4903 12.3268 25.5719 10.9915 25.3354C10.76 25.2943 10.5719 25.1256 10.5149 24.8975C10.0023 22.8513 8.76986 20.9284 6.67055 20.579C6.4615 20.5441 6.26979 20.4402 6.12902 20.2818C4.89357 18.8916 3.23545 18.4369 1.62741 19.5963C-1.05046 21.527 1.25119 23.9514 3.72302 23.4541C4.44469 23.3085 4.85795 24.1462 5.4303 25.3051C6.06141 26.583 6.84688 28.1734 8.42465 29.3381C9.79306 30.3482 11.5024 30.8484 13.6096 30.8484C14.4813 30.8484 15.3033 30.7661 16.1539 30.6375C15.8734 29.9027 15.3278 28.8671 14.7105 28.0158Z" fill="#3BBC56"/>
                            <path d="M14.8719 30.7854C12.7647 30.7854 11.0554 30.2853 9.68698 29.2751C8.10927 28.1105 7.3238 26.5201 6.69263 25.2422C6.12028 24.0833 5.70703 23.2456 4.98536 23.3912C2.51353 23.8885 0.211877 21.464 2.88975 19.5334C3.26092 19.2657 3.63473 19.0852 4.00541 18.9812C3.23914 18.8428 2.42709 19.0199 1.62741 19.5965C-1.05046 21.5272 1.25119 23.9516 3.72302 23.4543C4.44469 23.3087 4.85794 24.1464 5.4303 25.3053C6.0614 26.5832 6.84687 28.1736 8.42464 29.3383C9.79305 30.3484 11.5024 30.8485 13.6096 30.8485C14.0703 30.8485 14.5171 30.825 14.9616 30.7844C14.9317 30.7845 14.902 30.7854 14.8719 30.7854Z" fill="#30AA44"/>
                            <path d="M22.2498 11.8475C22.1274 11.6165 21.8409 11.5285 21.6099 11.6508C18.8716 13.1015 17.5388 15.268 16.9029 16.83C16.7359 17.2403 16.6073 17.6298 16.5078 17.986C16.0718 16.7999 15.5174 15.6608 14.8485 14.5789C14.9491 14.0904 15.5851 11.4122 17.7337 9.61578C17.9342 9.44807 17.9609 9.14955 17.7932 8.94899C17.6254 8.74848 17.3269 8.72184 17.1264 8.88949C15.3501 10.3747 14.5111 12.355 14.147 13.5233C12.2032 10.7983 10.1872 9.46991 10.0947 9.40992C9.8756 9.26762 9.58232 9.32988 9.43995 9.54915C9.29759 9.76842 9.35997 10.0616 9.57918 10.204C9.59376 10.2135 10.5255 10.8275 11.7103 12.063C9.88052 11.8565 8.45988 12.324 8.38661 12.3488C8.13892 12.4325 8.00596 12.7011 8.08964 12.9487C8.15633 13.1462 8.34059 13.2708 8.53802 13.2708C8.58828 13.2708 8.63935 13.2627 8.68955 13.2457C8.70875 13.2393 10.607 12.6147 12.7347 13.2278C13.1171 13.7022 13.506 14.2327 13.8832 14.8208C14.2295 15.3607 14.5784 15.9705 14.9077 16.6498C11.7095 15.1597 7.45878 16.8103 7.2539 16.8916C7.01089 16.9881 6.89215 17.2633 6.98861 17.5062C7.08508 17.7492 7.36022 17.8679 7.60323 17.7715C7.65522 17.7509 12.8106 15.746 15.572 18.2039C16.0009 19.3545 16.3519 20.6566 16.553 22.1087C15.5961 21.5973 13.7836 20.8407 11.6929 21.0287C11.4325 21.0521 11.2404 21.2822 11.2638 21.5426C11.2873 21.803 11.5173 21.9953 11.7777 21.9717C14.2459 21.7501 16.3523 23.0668 16.6792 23.2829C16.8149 25.0529 16.7251 27.0227 16.2974 29.191C16.2468 29.4475 16.4137 29.6965 16.6702 29.747C16.9267 29.7976 17.1757 29.6307 17.2263 29.3742C17.8363 26.2818 17.8434 23.3088 17.2477 20.5379C17.207 20.3488 17.1625 20.1609 17.1163 19.9736C17.1169 19.9657 17.1179 19.9579 17.1181 19.9499C17.1193 19.9008 17.2953 15.008 22.0533 12.4873C22.2841 12.365 22.3722 12.0785 22.2498 11.8475Z" fill="#9BE0A3"/>
                            <path d="M30.3889 17.5049C30.3026 15.354 29.8465 13.0707 29.4468 11.834L29.3997 11.835C27.2577 11.8817 26.9967 15.5915 26.9865 15.7504C26.8359 18.9515 22.4875 23.5596 22.2039 23.846C18.7436 24.4397 16.4727 27.4414 15.7251 30.5378C16.2001 30.784 17.3568 31.1654 18.8228 31.1654C18.9416 31.1654 19.0635 31.1629 19.1877 31.1578C21.0968 31.0782 24.0463 30.3181 27.2565 27.1487C29.7924 24.6451 30.5306 21.0373 30.3889 17.5049Z" fill="#3BBC56"/>
                            <path d="M18.0463 28.387C18.8912 26.4548 20.2754 24.7588 22.1233 23.8618C18.7087 24.4882 16.4668 27.4658 15.7251 30.538C16.2001 30.7841 17.3568 31.1655 18.8228 31.1655C18.9416 31.1655 19.0635 31.163 19.1877 31.1579C19.3378 31.1516 19.4951 31.1406 19.6577 31.125C19.6469 31.1239 19.6361 31.1228 19.6253 31.1216C18.3104 30.9828 17.5165 29.5986 18.0463 28.387Z" fill="#30AA44"/>
                            <path d="M31.4933 9.34836C31.4139 8.45148 30.6542 7.84781 29.409 7.69215C27.4961 7.45313 26.277 8.61814 25.8775 10.4022C25.8374 10.5812 25.7378 10.742 25.5922 10.8537C24.5579 11.6464 24.0197 12.879 24.0317 14.4395C24.0384 15.3106 24.2162 16.0793 24.3278 16.4778C24.368 16.6214 24.3141 16.773 24.1946 16.8622C23.1054 17.675 22.4062 19.0836 22.1658 20.9589C21.9716 22.4741 22.2041 23.8461 22.2041 23.8461C25.21 22.7423 27.2057 21.1937 28.1521 19.1601C28.9559 17.4327 28.8845 15.7116 28.8272 14.3287C28.7752 13.0756 28.7377 12.1702 29.42 11.9585C30.6776 11.5683 31.5883 10.4218 31.4933 9.34836Z" fill="#30AA44"/>
                            <path d="M23.4767 20.9589C23.7172 19.0836 24.4164 17.675 25.5055 16.8622C25.625 16.7731 25.679 16.6214 25.6387 16.4779C25.5272 16.0794 25.3494 15.3106 25.3427 14.4395C25.3307 12.879 25.8688 11.6464 26.9031 10.8537C27.0487 10.7421 27.1483 10.5813 27.1884 10.4022C27.5038 8.99387 28.3303 7.97202 29.6051 7.72131C29.5411 7.71042 29.4759 7.70046 29.409 7.69215C27.4961 7.45313 26.277 8.61814 25.8775 10.4023C25.8374 10.5813 25.7378 10.7421 25.5922 10.8537C24.5579 11.6465 24.0197 12.8791 24.0317 14.4396C24.0384 15.3107 24.2162 16.0794 24.3278 16.4779C24.368 16.6215 24.3141 16.7731 24.1946 16.8623C23.1054 17.6751 22.4062 19.0836 22.1658 20.9589C21.9716 22.4741 22.2041 23.8462 22.2041 23.8462C22.6417 23.6855 23.0573 23.5151 23.452 23.3353C23.4009 22.8005 23.3551 21.9079 23.4767 20.9589Z" fill="#239B31"/>
                            </svg>';
                        } 
                        if (strstr($row['filter'], 'glutine')) {
                            echo '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <path d="M15.7499 0C7.05148 0 0 7.05148 0 15.7499C0 24.4484 7.05148 31.4999 15.7499 31.4999C24.4484 31.4999 31.4999 24.4484 31.4999 15.7499C31.4999 7.05148 24.4484 0 15.7499 0ZM15.7499 29.3275C10.4476 29.3327 5.62867 26.2477 3.41328 21.4304C1.1979 16.6132 1.99243 10.9469 5.44727 6.9246L21.2732 22.7506L24.5755 26.0526C22.1238 28.171 18.9901 29.3339 15.7499 29.3275ZM26.1125 24.5156L6.98963 5.393C12.376 0.828507 20.3628 1.15781 25.3554 6.15012C30.3477 11.1424 30.677 19.1292 26.1125 24.5156Z" fill="#C03A2B"/>
                            <path d="M18.4656 7.81543C18.3866 9.23849 17.1733 10.3303 15.75 10.2594C14.3267 10.3303 13.1134 9.23849 13.0344 7.81543C13.0344 6.83413 14.4699 3.40398 15.2537 1.60444C15.3407 1.40837 15.5353 1.28174 15.75 1.28174C15.9649 1.28174 16.1592 1.40837 16.2465 1.60444C17.03 3.40398 18.4656 6.83413 18.4656 7.81543Z" fill="#B19046"/>
                            <path d="M17.3794 7.02439C17.3794 8.21105 16.6499 9.17279 15.75 9.17279C14.8501 9.17279 14.1208 8.21105 14.1208 7.02439C14.1208 6.1619 14.9821 3.14588 15.4525 1.56441C15.5659 1.18426 15.9341 1.18426 16.05 1.56441C16.5181 3.14442 17.3794 6.1619 17.3794 7.02439Z" fill="#E4C05C"/>
                            <path d="M15.75 29.8707C15.45 29.8707 15.207 29.6275 15.207 29.3275V28.8268L13.7671 25.1197C13.6886 24.9371 13.716 24.7263 13.8385 24.5699C13.9612 24.4137 14.1592 24.3366 14.3553 24.3692C14.5511 24.4019 14.7137 24.5388 14.7789 24.7263L16.2563 28.5281C16.2807 28.5907 16.2932 28.6574 16.2932 28.7246V29.3275C16.2932 29.4715 16.236 29.6096 16.134 29.7115C16.0321 29.8135 15.894 29.8707 15.75 29.8707Z" fill="#59474E"/>
                            <path d="M15.75 29.8705C15.45 29.8705 15.207 29.6273 15.207 29.3273V28.7245C15.2068 28.6594 15.2185 28.5949 15.2413 28.534L16.6645 24.7323C16.7296 24.5462 16.8899 24.4103 17.0838 24.3763C17.2777 24.3423 17.4747 24.4159 17.5989 24.5687C17.7231 24.7215 17.7546 24.9296 17.6818 25.1124L16.2932 28.8227V29.3273C16.2932 29.6273 16.05 29.8705 15.75 29.8705Z" fill="#59474E"/>
                            <path d="M20.5946 12.0137C20.2521 12.5708 19.7947 13.0485 19.253 13.415L17.651 14.2621C17.6314 14.2721 17.6116 14.2812 17.5911 14.2892C16.9904 14.5408 16.2966 14.3056 15.9727 13.7406C15.9052 13.6289 15.8592 13.5055 15.837 13.3769C15.5671 12.1618 15.7346 10.8909 16.3093 9.78683C17.1566 8.35864 18.8838 7.62547 19.9047 7.30497C20.1687 7.2199 20.4369 7.149 20.7085 7.09326C20.7085 7.09326 21.8436 9.90637 20.5946 12.0137Z" fill="#F29C1F"/>
                            <path d="M19.5353 11.378C19.1911 11.9354 18.732 12.4131 18.1885 12.7791L16.5919 13.6264C16.5728 13.636 16.5528 13.6433 16.532 13.6482C16.3543 13.7181 16.1636 13.7496 15.9727 13.7403C15.9052 13.6286 15.8592 13.5052 15.837 13.3766C15.5671 12.1616 15.7346 10.8906 16.3093 9.78654C17.1566 8.35835 18.8838 7.62519 19.9047 7.30469C20.1438 8.29846 20.3555 9.99312 19.5353 11.378Z" fill="#F0C419"/>
                            <path d="M20.5946 17.6641C20.2521 18.2212 19.7947 18.6989 19.253 19.0654L17.651 19.9125C17.6314 19.9225 17.6116 19.9318 17.5911 19.9396C16.9904 20.1912 16.2966 19.956 15.9727 19.3913C15.9052 19.2793 15.8592 19.1559 15.837 19.0273C15.5671 17.8122 15.7346 16.5412 16.3093 15.4375C17.1566 14.009 18.8838 13.2759 19.9047 12.9554C20.1687 12.8703 20.4369 12.7996 20.7085 12.7437C20.7085 12.7437 21.8436 15.5568 20.5946 17.6641Z" fill="#E57E25"/>
                            <path d="M19.5353 17.0287C19.1911 17.5861 18.732 18.0638 18.1885 18.4297L16.5919 19.2749C16.5728 19.2844 16.5528 19.2917 16.532 19.2966C16.3543 19.3668 16.1636 19.3981 15.9727 19.389C15.9052 19.2771 15.8592 19.1539 15.837 19.025C15.5671 17.81 15.7346 16.539 16.3093 15.4352C17.1566 14.0068 18.8838 13.2736 19.9047 12.9531C20.1438 13.9493 20.3555 15.6438 19.5353 17.0287Z" fill="#F29C1F"/>
                            <path d="M20.5946 23.3262C20.2521 23.8834 19.7947 24.3611 19.253 24.7275L17.651 25.5746C17.6314 25.5846 17.6116 25.5939 17.5911 25.6017C16.9904 25.8533 16.2966 25.6181 15.9727 25.0534C15.9052 24.9414 15.8592 24.818 15.837 24.6894C15.5671 23.4744 15.7346 22.2034 16.3093 21.0996C17.1566 19.6711 18.8838 18.938 19.9047 18.6175C20.1687 18.5324 20.4369 18.4617 20.7085 18.4058C20.7085 18.4058 21.8436 21.2189 20.5946 23.3262Z" fill="#F29C1F"/>
                            <path d="M19.5353 22.691C19.1911 23.2484 18.732 23.7261 18.1885 24.0921L16.5919 24.9394C16.5728 24.9489 16.5528 24.9563 16.532 24.9612C16.3543 25.0313 16.1636 25.0626 15.9727 25.0536C15.9052 24.9416 15.8592 24.8181 15.837 24.6896C15.5671 23.4745 15.7346 22.2035 16.3093 21.0998C17.1566 19.6713 18.8838 18.9382 19.9047 18.6177C20.1438 19.6117 20.3555 21.3061 19.5353 22.691Z" fill="#F0C419"/>
                            <path d="M10.9055 12.0137C11.2478 12.5708 11.7052 13.0485 12.2469 13.415L13.8492 14.2621C13.8685 14.2721 13.8886 14.2812 13.9088 14.2892C14.5095 14.5408 15.2033 14.3056 15.5272 13.7406C15.5947 13.6289 15.6409 13.5055 15.6632 13.3769C15.9328 12.1618 15.7656 10.8909 15.1906 9.78683C14.3433 8.35864 12.6163 7.62547 11.5952 7.30497C11.3314 7.2199 11.063 7.149 10.7914 7.09326C10.7914 7.09326 9.6563 9.90637 10.9055 12.0137Z" fill="#E57E25"/>
                            <path d="M11.9645 11.378C12.3087 11.9354 12.7678 12.4131 13.3112 12.7791L14.9081 13.6264C14.9269 13.636 14.947 13.6433 14.9678 13.6482C15.1457 13.7181 15.3362 13.7496 15.5271 13.7403C15.5946 13.6286 15.6408 13.5052 15.663 13.3766C15.9327 12.1616 15.7655 10.8906 15.1905 9.78654C14.3431 8.35835 12.6162 7.62519 11.5951 7.30469C11.3562 8.29846 11.1443 9.99312 11.9645 11.378Z" fill="#F29C1F"/>
                            <path d="M10.9055 17.6641C11.2478 18.2212 11.7052 18.6989 12.2469 19.0654L13.8492 19.9125C13.8685 19.9225 13.8886 19.9318 13.9088 19.9396C14.5095 20.1912 15.2033 19.956 15.5272 19.3913C15.5947 19.2793 15.6409 19.1559 15.6632 19.0273C15.9328 17.8122 15.7656 16.5412 15.1906 15.4375C14.3433 14.009 12.6163 13.2759 11.5952 12.9554C11.3314 12.8703 11.063 12.7996 10.7914 12.7437C10.7914 12.7437 9.6563 15.5568 10.9055 17.6641Z" fill="#F29C1F"/>
                            <path d="M11.9645 17.0284C12.3087 17.5858 12.7678 18.0635 13.3112 18.4295L14.9081 19.2768C14.9269 19.2864 14.947 19.2937 14.9678 19.2986C15.1457 19.3688 15.3362 19.4 15.5271 19.391C15.5946 19.279 15.6408 19.1556 15.663 19.027C15.9327 17.812 15.7655 16.541 15.1905 15.4372C14.3431 14.0087 12.6162 13.2756 11.5951 12.9551C11.3562 13.9491 11.1443 15.6435 11.9645 17.0284Z" fill="#F0C419"/>
                            <path d="M10.9055 23.3262C11.2478 23.8834 11.7052 24.3611 12.2469 24.7275L13.8492 25.5746C13.8685 25.5846 13.8886 25.5939 13.9088 25.6017C14.5095 25.8533 15.2033 25.6181 15.5272 25.0534C15.5947 24.9414 15.6409 24.818 15.6632 24.6894C15.9328 23.4744 15.7656 22.2034 15.1906 21.0996C14.3433 19.6711 12.6163 18.938 11.5952 18.6175C11.3314 18.5324 11.063 18.4617 10.7914 18.4058C10.7914 18.4058 9.6563 21.2189 10.9055 23.3262Z" fill="#E57E25"/>
                            <path d="M11.9645 22.691C12.3087 23.2484 12.7678 23.7261 13.3112 24.0921L14.9081 24.9394C14.9269 24.9489 14.947 24.9563 14.9678 24.9612C15.1457 25.0313 15.3362 25.0626 15.5271 25.0536C15.5946 24.9416 15.6408 24.8181 15.663 24.6896C15.9327 23.4745 15.7655 22.2035 15.1905 21.0998C14.3431 19.6713 12.6162 18.9382 11.5951 18.6177C11.3562 19.6117 11.1443 21.3061 11.9645 22.691Z" fill="#F29C1F"/>
                            </svg>';
                        } 
                        if (strstr($row['filter'], 'lattosio')) {
                            echo '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <path d="M9.35156 10.3359V22.1484V25.1016H18.2109V13.2891V10.3359H9.35156Z" fill="white"/>
                            <path d="M22.1484 25.1016H18.2109L20.1797 23.1328L22.1484 25.1016Z" fill="#D7E9FF"/>
                            <path d="M25.4953 6.00469C22.9999 3.51422 19.5546 1.96875 15.75 1.96875C8.14078 1.96875 1.96875 8.14078 1.96875 15.75C1.96875 19.5546 3.51422 22.9999 6.00469 25.4953C8.50008 27.9858 11.9454 29.5312 15.75 29.5312C23.3592 29.5312 29.5312 23.3592 29.5312 15.75C29.5312 11.9454 27.9858 8.50008 25.4953 6.00469Z" fill="#94C1FF"/>
                            <path d="M11.3203 6.39844H20.1797V8.36227H11.3203V6.39844Z" fill="#D7E9FF"/>
                            <path d="M22.1484 10.3359V25.1016L20.1797 23.1328V10.3359H21.1641H22.1484Z" fill="white"/>
                            <path d="M20.1797 8.3623L18.2109 10.336H9.35156L11.3203 8.3623H20.1797Z" fill="#D7E9FF"/>
                            <path d="M20.1797 8.3623L22.1484 10.336H21.1641H20.1797H18.2109L20.1797 8.3623Z" fill="#D7E9FF"/>
                            <path d="M18.2109 10.3359V13.2891V25.1016L20.1797 23.1328V11.3203V10.3359H18.2109Z" fill="#D7E9FF"/>
                            <path d="M15.75 29.5312C23.3592 29.5312 29.5312 23.3592 29.5312 15.75C29.5312 11.9454 27.9858 8.50008 25.4953 6.00469C22.9999 3.51422 19.5546 1.96875 15.75 1.96875C8.14078 1.96875 1.96875 8.14078 1.96875 15.75C1.96875 19.5546 3.51422 22.9999 6.00469 25.4953C8.50008 27.9858 11.9454 29.5312 15.75 29.5312ZM15.75 0.492188C24.1763 0.492188 31.0078 7.32375 31.0078 15.75C31.0078 24.1763 24.1763 31.0078 15.75 31.0078C7.32375 31.0078 0.492188 24.1763 0.492188 15.75C0.492188 7.32375 7.32375 0.492188 15.75 0.492188Z" fill="#D7E9FF"/>
                            <path d="M15.75 31.5C7.06535 31.5 0 24.4346 0 15.75C0 7.06535 7.06535 0 15.75 0C24.4346 0 31.5 7.06535 31.5 15.75C31.5 24.4346 24.4346 31.5 15.75 31.5ZM15.75 0.984375C7.60823 0.984375 0.984375 7.60823 0.984375 15.75C0.984375 23.8918 7.60823 30.5156 15.75 30.5156C23.8918 30.5156 30.5156 23.8918 30.5156 15.75C30.5156 7.60823 23.8918 0.984375 15.75 0.984375Z" fill="#116FFF"/>
                            <path d="M15.75 30.0234C7.87992 30.0234 1.47656 23.6201 1.47656 15.75C1.47656 7.87992 7.87992 1.47656 15.75 1.47656C23.6201 1.47656 30.0234 7.87992 30.0234 15.75C30.0234 23.6201 23.6201 30.0234 15.75 30.0234ZM15.75 2.46094C8.42231 2.46094 2.46094 8.42231 2.46094 15.75C2.46094 23.0777 8.42231 29.0391 15.75 29.0391C23.0777 29.0391 29.0391 23.0777 29.0391 15.75C29.0391 8.42231 23.0777 2.46094 15.75 2.46094Z" fill="#116FFF"/>
                            <path d="M6.00525 25.9868C5.87925 25.9868 5.75325 25.9386 5.65727 25.8426C5.46483 25.6502 5.46483 25.3391 5.65727 25.1467L25.1469 5.65703C25.3394 5.46458 25.6504 5.46458 25.8429 5.65703C26.0353 5.84947 26.0353 6.16054 25.8429 6.35298L6.35323 25.8426C6.25725 25.9386 6.13125 25.9868 6.00525 25.9868Z" fill="#116FFF"/>
                            <path d="M22.1472 25.5952H18.2087C17.9366 25.5952 17.7166 25.3752 17.7166 25.1031V10.3345C17.7166 10.0623 17.9366 9.84229 18.2087 9.84229H22.1472C22.4194 9.84229 22.6394 10.0623 22.6394 10.3345V25.1031C22.6394 25.3752 22.4194 25.5952 22.1472 25.5952ZM18.7009 24.6109H21.655V10.8267H18.7009V24.6109Z" fill="#116FFF"/>
                            <path d="M22.1483 25.5944C22.0223 25.5944 21.8963 25.5461 21.8003 25.4501L19.8306 23.4814C19.6382 23.289 19.6382 22.9779 19.8306 22.7854C20.0231 22.593 20.3341 22.593 20.5266 22.7854L22.4963 24.7542C22.6887 24.9466 22.6887 25.2577 22.4963 25.4501C22.4003 25.5461 22.2743 25.5944 22.1483 25.5944Z" fill="#116FFF"/>
                            <path d="M18.2089 25.5953C18.0829 25.5953 17.9569 25.5471 17.8609 25.4511C17.6684 25.2587 17.6684 24.9476 17.8609 24.7552L19.8306 22.7854C20.0231 22.593 20.3341 22.593 20.5266 22.7854C20.719 22.9779 20.719 23.289 20.5266 23.4814L18.5568 25.4511C18.4609 25.5471 18.3349 25.5953 18.2089 25.5953Z" fill="#116FFF"/>
                            <path d="M18.2087 25.5952H9.3523C9.08012 25.5952 8.86011 25.3752 8.86011 25.1031V10.3345C8.86011 10.0623 9.08012 9.84229 9.3523 9.84229H18.2087C18.4809 9.84229 18.7009 10.0623 18.7009 10.3345V25.1031C18.7009 25.3752 18.4809 25.5952 18.2087 25.5952ZM9.84448 24.6109H17.7165V10.8267H9.84448V24.6109Z" fill="#116FFF"/>
                            <path d="M18.2089 10.8278C18.0829 10.8278 17.9569 10.7795 17.8609 10.6836C17.6684 10.4911 17.6684 10.1801 17.8609 9.98762L19.8306 8.01689C20.0231 7.82445 20.3341 7.82445 20.5266 8.01689C20.719 8.20934 20.719 8.5204 20.5266 8.71285L18.5568 10.6836C18.4609 10.7795 18.3349 10.8278 18.2089 10.8278Z" fill="#116FFF"/>
                            <path d="M22.1483 10.8268C22.0223 10.8268 21.8963 10.7786 21.8003 10.6826L19.8306 8.71284C19.6382 8.5204 19.6382 8.20934 19.8306 8.01689C20.0231 7.82445 20.3341 7.82445 20.5266 8.01689L22.4963 9.98662C22.6887 10.1791 22.6887 10.4901 22.4963 10.6826C22.4003 10.7786 22.2743 10.8268 22.1483 10.8268Z" fill="#116FFF"/>
                            <path d="M9.35144 10.8278C9.22544 10.8278 9.09944 10.7795 9.00346 10.6836C8.81102 10.4911 8.81102 10.1801 9.00346 9.98762L10.9742 8.01689C11.1666 7.82445 11.4777 7.82445 11.6701 8.01689C11.8626 8.20934 11.8626 8.5204 11.6701 8.71285L9.69942 10.6836C9.60344 10.7795 9.47744 10.8278 9.35144 10.8278Z" fill="#116FFF"/>
                            <path d="M20.1785 23.6255C19.9063 23.6255 19.6863 23.4055 19.6863 23.1333V10.3345C19.6863 10.0623 19.9063 9.84229 20.1785 9.84229C20.4506 9.84229 20.6707 10.0623 20.6707 10.3345V23.1333C20.6707 23.4055 20.4506 23.6255 20.1785 23.6255Z" fill="#116FFF"/>
                            <path d="M20.1787 8.85694H11.3223C11.0501 8.85694 10.8301 8.63693 10.8301 8.36475C10.8301 8.09257 11.0501 7.87256 11.3223 7.87256H20.1787C20.4509 7.87256 20.6709 8.09257 20.6709 8.36475C20.6709 8.63693 20.4509 8.85694 20.1787 8.85694Z" fill="#116FFF"/>
                            <path d="M20.1806 8.85693H11.3223C11.0501 8.85693 10.8301 8.63692 10.8301 8.36474V6.39697C10.8301 6.12479 11.0501 5.90479 11.3223 5.90479H20.1806C20.4528 5.90479 20.6728 6.12479 20.6728 6.39697V8.36474C20.6728 8.63692 20.4528 8.85693 20.1806 8.85693ZM11.8145 7.87255H19.6885V6.88916H11.8145V7.87255Z" fill="#116FFF"/>
                            </svg>';
                        }}
                    ?></span>
                </div>
            </div>
        </div>
    </article>
</section>
<section class="recipe_ingredients">
    <div class="recipe_ingredients_top">
        <h2 class="recipe_ingredients_h2">INGREDIENTI</h2>
        <hr class="recipe_ingredients_hr">
    </div>
    <article class="recipe_ingredients_body">
        <?php echo $row['ingredients']; ?>
    </article>
</section>
<section class="recipe_method">
    <div class="recipe_method_top">
        <h2 class="recipe_method_h2">PROCEDIMENTO</h2>
        <hr class="recipe_method_hr">
    </div>
    <article class="recipe_method_body">
        <?php echo $row['method']; ?>
    </article>
    <?php if (isAdmin()) { ?>
        <a class="link_to_edit" href="?page=editrecipe&id=<?php echo $row['id']; ?>">Modifica</a>
    <?php } ?>
</section>
<?php }} ?>
<!-- Rich Snippets -->
<script type="text/javascript"> 
    var data = {
        "@context": "http://www.schema.org",
        "@type": "Recipe",
        "name": "<?php echo htmlentities($row['title'], ENT_QUOTES); ?>",
        "image": "<?php echo htmlentities($row['image'], ENT_QUOTES); ?>",
        "author": {
            "@type": "Person",
            "name": "Nikola"
        },
        "prepTime": "PT<?php echo htmlentities($row['time'], ENT_QUOTES); ?>M",
        "keywords": "dolce<?php if (!empty($row['filter'])) echo ",";?><?php echo htmlentities($row['filter'], ENT_QUOTES); ?>",
        "recipeYield": "<?php echo htmlentities($row['person'], ENT_QUOTES); ?>",
        "recipeCategory": "<?php echo htmlentities($row['category'], ENT_QUOTES); ?>",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingCount": "<?php echo ($voters['voters'] != 0) ? htmlentities($voters['voters'], ENT_QUOTES) : 1; ?>",
            "ratingValue": "<?php echo ($voters['voters'] != 0) ? number_format($vote['vote']/$voters['voters'], 1) : 5; ?>"
        },
        "recipeIngredient": [
            <?php
                $ingredients = str_replace('&nbsp', ' ', $row['ingredients']);
                $ingredients_array = explode('</li><li>', $ingredients);
                $ingredients_length = count($ingredients_array);
                for ($i = 0; $i < $ingredients_length; $i++) {
                    echo '"';
                    echo strip_tags($ingredients_array[$i]);
                    echo '",';
                }
            ?>
        ],
        "recipeInstructions": [
            <?php
                $methods = str_replace('&nbsp', ' ', $row['method']);
                $methods_array = explode('</li><li>', $methods);
                $methods_length = count($methods_array);
                for ($i = 0; $i < $methods_length; $i++) {
                    echo "{";
            
                    echo '"';
                    echo "@type";
                    echo '"';
            
                    echo ':';
            
                    echo '"';
                    echo 'HowToStep';
                    echo '",';
            
                    echo '"';
                    echo "text";
                    echo '"';
            
                    echo ':';
            
                    echo '"';
                    echo strip_tags($methods_array[$i]);
                    echo '"';
            
                    echo "},";
                }
            ?>
        ]
    }
    var script = document.createElement('script');
    script.type = "application/ld+json";
    script.innerHTML = JSON.stringify(data);
    document.getElementsByTagName('head')[0].appendChild(script);
</script>